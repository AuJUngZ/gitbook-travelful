# การออกแบบฐานข้อมูล (Database)

### ภาพรวม

ฐานข้อมูลนี้ออกแบบมาเพื่อให้สามารถเก็บข้อมูลสำคัญต่างๆ ได้อย่างครบถ้วน เพื่อใช้ในการออกแบบแผนการท่องเที่ยว แนะนำสถานที่เที่ยวและรูปแบบการเดินทางต่างๆ ได้อย่างมีประสิทธิภาพ โดยรวมถึงฟังก์ชันการจัดเก็บข้อมูลผู้ใช้ การจัดการทรัพยากรในแต่ละทริป รายการสถานที่ที่ต้องการไป ตลอดจนการชำระเงินและข้อมูลกระเป๋าเงินของผู้ใช้

***

## โครงสร้างฐานข้อมูล

### Database Schema

<figure><img src="../.gitbook/assets/Travelful + (5).png" alt=""><figcaption><p>Database Diagram</p></figcaption></figure>

### รายละเอียดฐานข้อมูล

#### 1. ผู้ใช้และข้อมูลส่วนตัว

**`Users`**- เก็บข้อมูลพื้นฐานของผู้ใช้ เช่น ชื่อผู้ใช้ บทบาท และข้อมูลการเข้าสู่ระบบ

| ข้อมูล      | ประเภทข้อมูล | รายละเอียด                            |
| ----------- | ------------ | ------------------------------------- |
| id          | integer      | Primary Key                           |
| username    | varchar      | ชื่อผู้ใช้                            |
| password    | varchar      | รหัสผ่าน (เข้ารหัส)                   |
| role        | varchar      | บทบาทของผู้ใช้                        |
| provider    | enum         | ช่องทางการสมัคร เช่น Google, Facebook |
| providerId  | int          | รหัสอ้างอิงจากผู้ให้บริการ            |
| created\_at | timestamp    | เวลาที่สมัคร                          |

**`User Information`** - ข้อมูลส่วนตัวเพิ่มเติมของผู้ใช้

| ข้อมูล         | ประเภทข้อมูล | รายละเอียด                   |
| -------------- | ------------ | ---------------------------- |
| id             | integer      | Primary Key                  |
| gender         | enum         | เพศของผู้ใช้                 |
| status         | enum         | สถานะ เช่น โสด แต่งงาน       |
| birthDate      | date         | วันเกิด                      |
| live\_province | varchar      | จังหวัดที่อาศัย              |
| career         | varchar      | อาชีพ                        |
| excercise      | enum         | ระดับการออกกำลังกาย          |
| allegic\_food  | varchar\[]   | อาหารที่แพ้                  |
| allegies       | varchar\[]   | การแพ้อื่น ๆ                 |
| chronic        | varchar\[]   | โรคเรื้อรัง                  |
| pic\_name      | varchar      | ชื่อไฟล์รูปโปรไฟล์           |
| user\_id       | integer      | Foreign Key ไปยัง `users.id` |
| created\_at    | timestamp    | เวลาที่บันทึกข้อมูล          |

***

#### 2. ข้อมูลเกี่ยวกับการเดินทาง

**`Trips`** - เก็บข้อมูลทริปของผู้ใช้

| ข้อมูล | ประเภทข้อมูล | รายละเอียด                                  |
| ------ | ------------ | ------------------------------------------- |
| id     | integer      | Primary Key                                 |
| uid    | integer      | Foreign Key ไปยัง `users.id`                |
| budget | float        | งบประมาณ                                    |
| type   | enum         | ประเภททริป (AI-generated หรือ User-created) |

**`Trip_Location`** - ข้อมูลเกี่ยวกับสถานที่เที่ยวในแต่ละทริป

| ข้อมูล        | ประเภทข้อมูล | รายละเอียด                         |
| ------------- | ------------ | ---------------------------------- |
| lid           | integer      | Foreign Key ไปยัง `visible_loc.id` |
| tid           | integer      | Foreign Key ไปยัง `trips.id`       |
| arrival\_time | time         | เวลาที่เดินทางถึง                  |

**`Visible_Location`** - รายละเอียดของสถานที่เที่ยวที่แพลตฟอร์มมีข้อมูล และสามารถเพิ่มในทริป

| ข้อมูล    | ประเภทข้อมูล | รายละเอียด  |
| --------- | ------------ | ----------- |
| id        | integer      | Primary Key |
| loc\_name | varchar      | ชื่อสถานที่ |
| latitude  | varchar      | ละติจูด     |
| longitude | varchar      | ลองจิจูด    |

**`Trip_Items`** - รายการสิ่งของที่ต้องเตรียมสำหรับแต่ละทริป

| ข้อมูล      | ประเภทข้อมูล | รายละเอียด                   |
| ----------- | ------------ | ---------------------------- |
| id          | integer      | Primary Key                  |
| name        | varchar      | ชื่อสิ่งของ                  |
| category    | enum         | ประเภทของสิ่งของ             |
| description | varchar      | คำอธิบาย                     |
| status      | enum         | สถานะของสิ่งของ              |
| tid         | integer      | Foreign Key ไปยัง `trips.id` |

***

#### 3. เป้าหมายการเดินทาง

**`User_Goal`** - เป้าหมายในการเดินทางของผู้ใช้ เพื่อใช้ในการตัดสินใจวางแผนท่องเที่ยวต่างๆ

| ข้อมูล        | ประเภทข้อมูล | รายละเอียด                   |
| ------------- | ------------ | ---------------------------- |
| id            | integer      | Primary Key                  |
| title         | varchar      | ชื่อเป้าหมาย                 |
| region        | varchar      | ภูมิภาค                      |
| country       | varchar      | ประเทศ                       |
| total\_member | integer      | จำนวนสมาชิก                  |
| budget        | float        | งบประมาณ                     |
| startDate     | date         | วันที่เริ่มต้น               |
| endDate       | date         | วันที่สิ้นสุด                |
| lifestyle     | varchar      | สไตล์การท่องเที่ยว           |
| description   | varchar      | รายละเอียดเพิ่มเติม          |
| uid           | integer      | Foreign Key ไปยัง `users.id` |

***

#### 4. ข้อมูลทางการเงิน

**`User_Wallet`** - รายละเอียดบัญชีและบัตรเงินสดของผู้ใช้

| ข้อมูล    | ประเภทข้อมูล | รายละเอียด                             |
| --------- | ------------ | -------------------------------------- |
| id        | integer      | Primary Key                            |
| uid       | integer      | Foreign Key ไปยัง `users.id`           |
| card\_ref | varchar      | อ้างอิงจากผู้ให้บริการ เช่น Mastercard |
| balance   | float        | ยอดเงินคงเหลือ                         |

**`Payment_Information`** - ข้อมูลการชำระเงิน

| ชื่อคอลัมน์ | ประเภทข้อมูล | รายละเอียด                         |
| ----------- | ------------ | ---------------------------------- |
| id          | integer      | Primary Key                        |
| category    | varchar      | หมวดหมู่การชำระเงิน                |
| title       | varchar      | รายละเอียดการชำระเงิน              |
| amount      | float        | จำนวนเงิน                          |
| status      | enum         | สถานะการชำระเงิน                   |
| datetime    | datetime     | วันที่ทำรายการ                     |
| wid         | integer      | Foreign Key ไปยัง `user_wallet.id` |

**`Flight_Ticket`** - ข้อมูลตั๋วเครื่องบิน

| ข้อมูล      | ประเภทข้อมูล | รายละเอียด                          |
| ----------- | ------------ | ----------------------------------- |
| id          | integer      | Primary Key                         |
| ticket\_ref | varchar      | หมายเลขตั๋ว                         |
| paymentID   | integer      | Foreign Key ไปยัง `payment_info.id` |

***

#### 5. แรงบันดาลใจในการเดินทาง

**`Inspire_Post`** - โพสต์ที่เป็นแรงบันดาลใจในการเดินทาง

| ข้อมูล      | ประเภทข้อมูล | รายละเอียด                            |
| ----------- | ------------ | ------------------------------------- |
| id          | integer      | Primary Key                           |
| mediaUrl    | varchar      | URL ของสื่อ (เช่น วิดีโอ หรือ บทความ) |
| mediaType   | enum         | ประเภทของสื่อ                         |
| created\_at | timestamp    | เวลาที่บันทึก                         |
| tripId      | integer      | Foreign Key ไปยัง `trips.id`          |

***

### สรุป

โครงสร้างฐานข้อมูลนี้ออกแบบให้สามารถรองรับการจัดเก็บและบริหารข้อมูลที่เกี่ยวข้องกับการวางแผนการเดินทางได้อย่างครบถ้วน ตั้งแต่การจัดการบัญชีผู้ใช้ เป้าหมายในการเดินทาง งบประมาณ รวมไปถึงแรงบันดาลใจจากโพสต์หรือวิดีโอที่เกี่ยวข้อง ทั้งนี้ยังสามารถต่อยอดเพื่อรองรับฟีเจอร์เพิ่มเติมในอนาคตได้อีกด้วย
